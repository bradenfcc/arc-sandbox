'use strict'

module.exports = () => `
FROM alpine:3.8

RUN \\
    apk update && \\
    apk upgrade && \\
    apk add --no-cache \\
            zip \\
            && \\
    zip -v

WORKDIR /opt/zip/src/

CMD zip "../dist/$(date '+%Y-%m-%d-%H-%M-%S').zip" -r . -x .dockerignore -x .env -x .fusion/* -x .git/* -x .gitignore -x data/* -x dist/* -x docker-compose.yml -x mocks/* -x node_modules/*

# must use COPY instead of volume to get proper file system case-sensitivity
COPY ./ ./
`
